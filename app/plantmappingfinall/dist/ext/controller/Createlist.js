sap.ui.define(["sap/m/MessageToast","sap/m/Dialog","sap/m/Button"],function(e){"use strict";return{createhandler:function(t){debugger;var a=this._view.getContent()[0].getContent();var r=sap.ui.core.Fragment.createId("id");var n=sap.ui.core.Fragment.createId("comboBox");var o=sap.ui.core.Fragment.createId("form");var s=sap.ui.core.Fragment.createId("bd");var i=sap.ui.core.Fragment.createId("cancel");var l=new sap.m.ComboBox(n,{showSecondaryValues:true,filterSecondaryValues:true,value:"{/comboBoxValue}",selectedKey:"{/comboBoxKey}",items:{path:"/CountriesCollection",sorter:{path:"text"},template:new sap.ui.core.ListItem({key:"{plant}",text:"{plant}",additionalText:"{plant_info}"}),length:400},required:true});var g;var u=this._view.getModel().sServiceUrl;$.ajax({url:u+"info",type:"GET",contentType:"application/json",success:function(e){var t=e.value;var a=new sap.ui.model.json.JSONModel({CountriesCollection:t});l.setModel(a)},error:function(t){e.show(t.responseJSON.error.message)}});var m=new sap.ui.layout.form.Form(o,{layout:new sap.ui.layout.form.ResponsiveGridLayout,formContainers:[new sap.ui.layout.form.FormContainer({formElements:[new sap.ui.layout.form.FormElement({label:new sap.m.Label({text:"Plant"}),fields:[l]}),new sap.ui.layout.form.FormElement({label:new sap.m.Label({text:"SBG"}),fields:[new sap.m.Input]}),new sap.ui.layout.form.FormElement({label:new sap.m.Label({text:"SBU"}),fields:[new sap.m.Input]})]})]});var p=new sap.m.Dialog(r,{title:"Plant Mapping",content:m});var c=new sap.m.Button(s,{text:"Save",press:async function(t,r){debugger;var n=t.getSource();var o=n.getParent();var s=o.getContent()[0];var i=s.getFormContainers()[0].getFormElements()[0].getFields()[0];var l=i.getSelectedKey();var g=i.getValue();if(!g){e.show("Please fill in the Plant field.");return}var m=s.getFormContainers()[0].getFormElements()[1].getFields()[0];var p=m.getValue();var c=s.getFormContainers()[0].getFormElements()[2].getFields()[0];var d=c.getValue();var f;if(this.getParent().getParent().oRootNode.baseURI){f=this.getParent().getParent().oRootNode.baseURI;var v=f.replace("/index.html","")}else if(t.oSource.getParent().getParent().getParent().getParent().getParent().getParent().getParent().oContainer.getParent().getParent().getParent().getManifestObject()._oBaseUri._string){f=t.oSource.getParent().getParent().getParent().getParent().getParent().getParent().getParent().oContainer.getParent().getParent().getParent().getManifestObject()._oBaseUri._string}$.ajax({url:u+"plant",type:"POST",contentType:"application/json",data:JSON.stringify({plant:g,SBG:p,SBU:d}),success:function(t){e.show("created successfully");a.refresh();o.close()},error:function(t){if(t.responseJSON&&t.responseJSON.error&&t.responseJSON.error.message==="Entity already exists"){e.show("Entry with this Plant already exists")}else{e.show(t.responseJSON.error.message)}}})}});var d=new sap.m.Button(i,{text:"Cancel",press:function(){p.close()}});p.addButton(c);p.addButton(d);p.open()}}});